---
date: "2021-04-24"
---

### 何为重构

* 重构（名词）
> 对软件内部结构的一种调整，目的是在不改变软件可观察行为的前提下，提高其可理解性，降低其修改成本。

* 重构（动词）
> 使用一系列重构手法，在不改变软件可观察行为的前提下，调整其结构。

### 两顶帽子
* 添加新功能和重构

添加新功能时，不应该修改既有代码。
重构时，不添加功能，只管调整代码结构。

### 为何重构

* 重构改进软件的设计
* 重构使软件更容易理解
* 重构帮助找bug
* 重构提高编程速度

### 何时重构

> 三次法则
第一次做某件事时只管去做；
第二次做类似的事会产生反感，但无论如何还是可以去做；
第三次再做类似的事，你就应该重构；

* 预备性重构：让添加新功能更容易
> 添加新功能之前

* 帮助理解的重构
> 理解代码，着手修改时

* 捡垃圾式重构
* 有计划的重构和见机行事的重构
* 长期重构
* 复审代码时重构
* 怎么对经理说  重构是理解代码最好的方式。
* 何时不应该重构
> 1. 看见一块凌乱的代码，但是不需要修改它  
> 2. 如果重写比重构容易

### 重构的挑战

* 延缓新功能开发
* 代码所有权
> 代码边界， 影响范围
* 分支 分支合并 CI
* 测试
* 遗留代码
> 复杂，没测试，别人写的
* 数据库 

### 重构，架构和YAGNI
* YAGNI - you aren't going to need it 你不会需要它。
> 

### 重构与软件开发过程

### 重构与性能

### 重构起源何处

### 自动化重构
IDE

### 延展阅读
《重构手册》 Bill Wake
《数据库重构》Scott Ambler Pramod Sadalage
《重构HTML》Elliotte Rusty Harold
《修改代码的艺术》Michael Feathers
refactoring.com