{"componentChunkName":"component---src-templates-note-js","path":"/notes/重构 改善既有代码的设计 第2版/1","result":{"data":{"dir":{"distinct":["重构 改善既有代码的设计 第2版/第01章 重构，第 一个示例","重构 改善既有代码的设计 第2版/第02章 重构的原则 ","重构 改善既有代码的设计 第2版/第03章 代码的坏味道","重构 改善既有代码的设计 第2版/第04章 构筑测试体系","重构 改善既有代码的设计 第2版/第05章 介绍重构名录","重构 改善既有代码的设计 第2版/第06章 第 一组重构","重构 改善既有代码的设计 第2版/第07章 封装","重构 改善既有代码的设计 第2版/第08章 搬移特性","重构 改善既有代码的设计 第2版/第09章 重新组织数据","重构 改善既有代码的设计 第2版/第10章 简化条件逻辑","重构 改善既有代码的设计 第2版/第11章 重构API","重构 改善既有代码的设计 第2版/第12章 处理继承关系"]},"note":{"edges":[{"node":{"frontmatter":{"title":"","date":"2021-04-24"},"html":"<h2 id=\"例子\" style=\"position:relative;\"><a href=\"#%E4%BE%8B%E5%AD%90\" aria-label=\"例子 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E4%BE%8B%E5%AD%90\" aria-label=\"例子 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>例子</h2>\n<p>设想有一个戏剧演出团，演员们经常要去各种场合表演戏剧。通常客户(customer),会指定几出剧目，而剧团则根据观众(audience)人数及剧目类型来向客户收费。</p>\n<ul>\n<li>戏剧类型：悲剧（tragedy）, 喜剧（comedy）</li>\n<li>客户结账时会返积分(volume credit)，下次通过积分可获得折扣</li>\n</ul>\n<h4 id=\"playsjson-剧目哈姆雷特-皆大欢喜-奥赛罗\" style=\"position:relative;\"><a href=\"#playsjson-%E5%89%A7%E7%9B%AE%E5%93%88%E5%A7%86%E9%9B%B7%E7%89%B9-%E7%9A%86%E5%A4%A7%E6%AC%A2%E5%96%9C-%E5%A5%A5%E8%B5%9B%E7%BD%97\" aria-label=\"playsjson 剧目哈姆雷特 皆大欢喜 奥赛罗 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#playsjson-%E5%89%A7%E7%9B%AE%E5%93%88%E5%A7%86%E9%9B%B7%E7%89%B9-%E7%9A%86%E5%A4%A7%E6%AC%A2%E5%96%9C-%E5%A5%A5%E8%B5%9B%E7%BD%97\" aria-label=\"playsjson 剧目哈姆雷特 皆大欢喜 奥赛罗 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>plays.json 剧目(哈姆雷特, 皆大欢喜, 奥赛罗,)</h4>\n<deckgo-highlight-code json  terminal=\"carbon\" line-numbers=\"true\"  highlight-lines=\"\">\n          <code slot=\"code\">{\n  &quot;hamlet&quot;: {&quot;name&quot;: &quot;Hamlet&quot;, &quot;type&quot;: &quot;tragedy&quot;},\n  &quot;as-like&quot;: {&quot;name&quot;: &quot;As You Like It&quot;, &quot;type&quot;: &quot;comedy&quot;},\n  &quot;othello&quot;: {&quot;name&quot;: &quot;Othello&quot;, &quot;type&quot;: &quot;tragedy&quot;}\n}</code>\n        </deckgo-highlight-code>\n<h4 id=\"invoicesjson-客户订单\" style=\"position:relative;\"><a href=\"#invoicesjson-%E5%AE%A2%E6%88%B7%E8%AE%A2%E5%8D%95\" aria-label=\"invoicesjson 客户订单 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#invoicesjson-%E5%AE%A2%E6%88%B7%E8%AE%A2%E5%8D%95\" aria-label=\"invoicesjson 客户订单 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>invoices.json 客户订单</h4>\n<deckgo-highlight-code json  terminal=\"carbon\" line-numbers=\"true\"  highlight-lines=\"\">\n          <code slot=\"code\">[\n  {\n    &quot;customer&quot;: &quot;BigCo&quot;,\n    &quot;performances&quot;: [\n      {\n        &quot;playID&quot;: &quot;hamlet&quot;,\n        &quot;audience&quot;: 55\n      },\n      {\n        &quot;playID&quot;: &quot;as-like&quot;,\n        &quot;audience&quot;: 35\n      },\n      {\n        &quot;playID&quot;: &quot;othello&quot;,\n        &quot;audience&quot;: 40\n      }\n    ]\n  }\n]</code>\n        </deckgo-highlight-code>\n<h4 id=\"打印账单详细的代码\" style=\"position:relative;\"><a href=\"#%E6%89%93%E5%8D%B0%E8%B4%A6%E5%8D%95%E8%AF%A6%E7%BB%86%E7%9A%84%E4%BB%A3%E7%A0%81\" aria-label=\"打印账单详细的代码 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E6%89%93%E5%8D%B0%E8%B4%A6%E5%8D%95%E8%AF%A6%E7%BB%86%E7%9A%84%E4%BB%A3%E7%A0%81\" aria-label=\"打印账单详细的代码 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>打印账单详细的代码</h4>\n<deckgo-highlight-code js  terminal=\"carbon\" line-numbers=\"true\"  highlight-lines=\"\">\n          <code slot=\"code\">function statement (invoice, plays) {\n  let totalAmount = 0;\n  let volumeCredits = 0;\n  let result = `Statement for ${invoice.customer}\\n`;\n  const format = new Intl.NumberFormat(&quot;en-US&quot;,\n                        { style: &quot;currency&quot;, currency: &quot;USD&quot;,\n                          minimumFractionDigits: 2 }).format;\n  for (let perf of invoice.performances) {\n    const play = plays[perf.playID];\n    let thisAmount = 0;\n\n    switch (play.type) {\n    case &quot;tragedy&quot;:\n      thisAmount = 40000;\n      if (perf.audience &gt; 30) {\n        thisAmount += 1000 * (perf.audience - 30);\n      }\n      break;\n    case &quot;comedy&quot;:\n      thisAmount = 30000;\n      if (perf.audience &gt; 20) {\n        thisAmount += 10000 + 500 * (perf.audience - 20);\n      }\n      thisAmount += 300 * perf.audience;\n      break;\n    default:\n        throw new Error(`unknown type: ${play.type}`);\n    }\n\n    // add volume credits\n    volumeCredits += Math.max(perf.audience - 30, 0);\n    // add extra credit for every ten comedy attendees\n    if (&quot;comedy&quot; === play.type) volumeCredits += Math.floor(perf.audience / 5);\n\n    //print line for this order\n    result += `  ${play.name}: ${format(thisAmount/100)} (${perf.audience} seats)\\n`;\n    totalAmount += thisAmount;\n  }\n  result += `Amount owed is ${format(totalAmount/100)}\\n`;\n  result += `You earned ${volumeCredits} credits\\n`;\n  return result;\n}</code>\n        </deckgo-highlight-code>\n<h4 id=\"账单的输出结果\" style=\"position:relative;\"><a href=\"#%E8%B4%A6%E5%8D%95%E7%9A%84%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C\" aria-label=\"账单的输出结果 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E8%B4%A6%E5%8D%95%E7%9A%84%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C\" aria-label=\"账单的输出结果 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>账单的输出结果</h4>\n<deckgo-highlight-code shell  terminal=\"carbon\" line-numbers=\"true\"  highlight-lines=\"\">\n          <code slot=\"code\">Statement for BigCo\n  Hamlet: $650.00 (55 seats)\n  As You Like It: $580.00 (35 seats)\n  Othello: $500.00 (40 seats)\nAmount owed is $1,730.00\nYou earned 47 credits</code>\n        </deckgo-highlight-code>\n<h2 id=\"代码分析\" style=\"position:relative;\"><a href=\"#%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90\" aria-label=\"代码分析 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90\" aria-label=\"代码分析 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>代码分析</h2>\n<h3 id=\"费用的计算\" style=\"position:relative;\"><a href=\"#%E8%B4%B9%E7%94%A8%E7%9A%84%E8%AE%A1%E7%AE%97\" aria-label=\"费用的计算 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E8%B4%B9%E7%94%A8%E7%9A%84%E8%AE%A1%E7%AE%97\" aria-label=\"费用的计算 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>费用的计算</h3>\n<ol>\n<li>悲剧，基础费用40000美元，观众人数 > 30时，超出的人数每人追收1000美元</li>\n<li>喜剧，基础费用30000美元，每位观众收300美元，观众人数 > 20时，超出的人数每人追收500美元，并且追加10000美元的基础费。</li>\n</ol>\n<h3 id=\"积分的算法\" style=\"position:relative;\"><a href=\"#%E7%A7%AF%E5%88%86%E7%9A%84%E7%AE%97%E6%B3%95\" aria-label=\"积分的算法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E7%A7%AF%E5%88%86%E7%9A%84%E7%AE%97%E6%B3%95\" aria-label=\"积分的算法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>积分的算法</h3>\n<p>观众人数&#x3C;=30时，0分，>30时，超出的人数，每人1分。如果观看的是喜剧，观众人数/5 向下取整作为喜剧积分。观众积分和喜剧积分的总和作为总积分。</p>\n<blockquote>\n<p>如果你要给程序添加一个特性，但发现代码因缺乏良好的结构而不易于进行更改，那就先重构那个程序，使其容易添加特性，然后再添加该特性</p>\n</blockquote>\n<h2 id=\"本例中的需求变化\" style=\"position:relative;\"><a href=\"#%E6%9C%AC%E4%BE%8B%E4%B8%AD%E7%9A%84%E9%9C%80%E6%B1%82%E5%8F%98%E5%8C%96\" aria-label=\"本例中的需求变化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E6%9C%AC%E4%BE%8B%E4%B8%AD%E7%9A%84%E9%9C%80%E6%B1%82%E5%8F%98%E5%8C%96\" aria-label=\"本例中的需求变化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>本例中的需求变化</h2>\n<ul>\n<li>如果客户希望以HTML格式输出账单。</li>\n<li>有新的戏剧类型增加，计费方式，积分方式也不同</li>\n</ul>\n<h2 id=\"重构的第一步\" style=\"position:relative;\"><a href=\"#%E9%87%8D%E6%9E%84%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AD%A5\" aria-label=\"重构的第一步 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E9%87%8D%E6%9E%84%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AD%A5\" aria-label=\"重构的第一步 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>重构的第一步</h2>\n<blockquote>\n<p>先检查自己是否有一套可靠的测试集。这些测试必须有自我检验能力。</p>\n</blockquote>\n<p>名言：</p>\n<blockquote>\n<p>傻瓜都能写出计算机可以理解的代码，唯有能写出人类容易理解的代码的，才是优秀的程序员。</p>\n</blockquote>\n<p>到目前为止，我们重构的目的主要是让逻辑和机构清晰，把复杂的代码块分解为更小的单元。起一个好的命名。</p>\n<h3 id=\"使用的技巧\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8%E7%9A%84%E6%8A%80%E5%B7%A7\" aria-label=\"使用的技巧 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E4%BD%BF%E7%94%A8%E7%9A%84%E6%8A%80%E5%B7%A7\" aria-label=\"使用的技巧 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用的技巧:</h3>\n<ul>\n<li>提炼函数 （106）</li>\n<li>以查询取代临时变量 （178）</li>\n<li>内联变量 （123）</li>\n<li>改变函数声明 （124）</li>\n<li>拆分循环 （227）</li>\n<li>移动语句 （223）</li>\n</ul>\n<h3 id=\"编程时，需要遵循营地方法则：保证你离开时的代码库一定比来时更健康\" style=\"position:relative;\"><a href=\"#%E7%BC%96%E7%A8%8B%E6%97%B6%EF%BC%8C%E9%9C%80%E8%A6%81%E9%81%B5%E5%BE%AA%E8%90%A5%E5%9C%B0%E6%96%B9%E6%B3%95%E5%88%99%EF%BC%9A%E4%BF%9D%E8%AF%81%E4%BD%A0%E7%A6%BB%E5%BC%80%E6%97%B6%E7%9A%84%E4%BB%A3%E7%A0%81%E5%BA%93%E4%B8%80%E5%AE%9A%E6%AF%94%E6%9D%A5%E6%97%B6%E6%9B%B4%E5%81%A5%E5%BA%B7\" aria-label=\"编程时，需要遵循营地方法则：保证你离开时的代码库一定比来时更健康 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%E7%BC%96%E7%A8%8B%E6%97%B6%EF%BC%8C%E9%9C%80%E8%A6%81%E9%81%B5%E5%BE%AA%E8%90%A5%E5%9C%B0%E6%96%B9%E6%B3%95%E5%88%99%EF%BC%9A%E4%BF%9D%E8%AF%81%E4%BD%A0%E7%A6%BB%E5%BC%80%E6%97%B6%E7%9A%84%E4%BB%A3%E7%A0%81%E5%BA%93%E4%B8%80%E5%AE%9A%E6%AF%94%E6%9D%A5%E6%97%B6%E6%9B%B4%E5%81%A5%E5%BA%B7\" aria-label=\"编程时，需要遵循营地方法则：保证你离开时的代码库一定比来时更健康 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>编程时，需要遵循营地方法则：保证你离开时的代码库一定比来时更健康</h3>\n<p>本章重构有3个重要节点：</p>\n<ol>\n<li>讲原函数分解成一组嵌套的函数</li>\n<li>应用拆分阶段分离计算逻辑和输出逻辑</li>\n<li>为价格和积分计算引入多态性。</li>\n</ol>\n<blockquote>\n<p>好代码的检验标准就是人们是否能轻而易举的修改它。</p>\n</blockquote>"}}]}},"pageContext":{"dir":"/重构 改善既有代码的设计 第2版/i","filePath":"/重构 改善既有代码的设计 第2版/第01章 重构，第 一个示例/","name":"重构 改善既有代码的设计 第2版"}},"staticQueryHashes":["3159585216","3810076356"]}